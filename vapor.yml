id: sistema-compraventa
name: Sistema Compraventa
environments:
    production:
        memory: 1024
        cli-memory: 512
        runtime: 'php-8.1:al2'
        build:
            - 'composer install --no-dev'
            - 'php artisan event:cache'
            - 'npm install'
            - 'npm run build'
            - 'rm -rf node_modules'
        deploy:
            - 'php artisan migrate --force'
            - 'php artisan db:seed --class=Database\\Seeders\\BaseDataSeeder --force'
        domain: tu-dominio.com
        database: vapor
        cache: vapor
        storage: s3
        queues:
            - default
        warm: 5
        timeout: 30
        build-env:
            - 'ASSET_URL=${ASSET_URL}'
            - 'VITE_APP_URL=${APP_URL}'
            - 'FILESYSTEM_DISK=s3'
            - 'AWS_URL=${AWS_URL}'
        directories:
            - 'storage/app/public'
            - 'storage/framework/cache'
            - 'storage/framework/sessions'
            - 'storage/framework/views'
            - 'storage/logs'
            - 'public/build'
        assets:
            - 'public/build' 