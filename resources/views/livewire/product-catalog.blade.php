<div>
    <div class="min-h-screen bg-gray-50 py-8">
        <div class="max-w-full mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Header estilo NFT -->
            <div class="mb-8">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-bold text-gray-900">Catálogo de Productos</h2>
                    <a href="#" class="text-blue-600 hover:text-blue-800 font-medium">EXPLORAR MÁS</a>
                </div>

                <!-- Filtros estilo NFT -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex flex-wrap items-center gap-4">
                        <!-- Categoría -->
                        <div class="relative">
                            <button class="flex items-center gap-2 bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-lg text-gray-700 transition-colors">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M5 10H7C9 10 10 9 10 7V5C10 3 9 2 7 2H5C3 2 2 3 2 5V7C2 9 3 10 5 10Z" stroke="currentColor" stroke-width="1.5"/>
                                    <path d="M17 10H19C21 10 22 9 22 7V5C22 3 21 2 19 2H17C15 2 14 3 14 5V7C14 9 15 10 17 10Z" stroke="currentColor" stroke-width="1.5"/>
                                    <path d="M17 22H19C21 22 22 21 22 19V17C22 15 21 14 19 14H17C15 14 14 15 14 17V19C14 21 15 22 17 22Z" stroke="currentColor" stroke-width="1.5"/>
                                    <path d="M5 22H7C9 22 10 21 10 19V17C10 15 9 14 7 14H5C3 14 2 15 2 17V19C2 21 3 22 5 22Z" stroke="currentColor" stroke-width="1.5"/>
                                </svg>
                                <span>Categoría</span>
                            </button>
                        </div>

                        <!-- Rango de Precio -->
                        <div class="relative">
                            <button class="flex items-center gap-2 bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-lg text-gray-700 transition-colors">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M8.67188 14.3298C8.67188 15.6198 9.66188 16.6598 10.8919 16.6598H13.4019C14.4719 16.6598 15.3419 15.7498 15.3419 14.6298C15.3419 13.4098 14.8119 12.9798 14.0219 12.6998L9.99187 11.2998C9.20187 11.0198 8.67188 10.5898 8.67188 9.36984C8.67188 8.24984 9.54187 7.33984 10.6119 7.33984H13.1219C14.3519 7.33984 15.3419 8.37984 15.3419 9.66984" stroke="currentColor" stroke-width="1.5"/>
                                    <path d="M12 6V18" stroke="currentColor" stroke-width="1.5"/>
                                    <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" stroke-width="1.5"/>
                                </svg>
                                <span>Rango de Precio</span>
                            </button>
                        </div>

                        <!-- Tipo de Venta -->
                        <div class="relative">
                            <button class="flex items-center gap-2 bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-lg text-gray-700 transition-colors">
                                <svg width="18" height="20" viewBox="0 0 18 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M3.0901 12.2799H6.1801V19.4799C6.1801 21.1599 7.0901 21.4999 8.2001 20.2399L15.7701 11.6399C16.7001 10.5899 16.3101 9.7199 14.9001 9.7199H11.8101V2.5199C11.8101 0.839898 10.9001 0.499897 9.7901 1.7599L2.2201 10.3599C1.3001 11.4199 1.6901 12.2799 3.0901 12.2799Z" stroke="currentColor" stroke-width="1.5"/>
                                </svg>
                                <span>Tipo de Venta</span>
                            </button>
                        </div>

                        <!-- Blockchain -->
                        <div class="relative">
                            <button class="flex items-center gap-2 bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-lg text-gray-700 transition-colors">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M3.16992 7.44043L11.9999 12.5504L20.7699 7.47043" stroke="currentColor" stroke-width="1.5"/>
                                    <path d="M12 21.61V12.54" stroke="currentColor" stroke-width="1.5"/>
                                    <path d="M9.92965 2.48028L4.58965 5.44028C3.37965 6.11028 2.38965 7.79028 2.38965 9.17028V14.8203C2.38965 16.2003 3.37965 17.8803 4.58965 18.5503L9.92965 21.5203C11.0696 22.1503 12.9396 22.1503 14.0796 21.5203L19.4196 18.5503C20.6296 17.8803 21.6196 16.2003 21.6196 14.8203V9.17028C21.6196 7.79028 20.6296 6.11028 19.4196 5.44028L14.0796 2.47028C12.9296 1.84028 11.0696 1.84028 9.92965 2.48028Z" stroke="currentColor" stroke-width="1.5"/>
                                </svg>
                                <span>Blockchain</span>
                            </button>
                        </div>

                        <!-- Ordenar -->
                        <div class="ml-auto">
                            <button class="flex items-center gap-2 bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-lg text-gray-700 transition-colors">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M3 7H21" stroke="currentColor" stroke-width="1.5"/>
                                    <path d="M6 12H18" stroke="currentColor" stroke-width="1.5"/>
                                    <path d="M10 17H14" stroke="currentColor" stroke-width="1.5"/>
                                </svg>
                                <span>Ordenar Por: Recientes</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Products Grid -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-8">
                @forelse($products as $product)
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-all duration-300 group">
                        <!-- Product Image -->
                        <div class="relative overflow-hidden">
                            <div 
                                wire:click="showProductDetail({{ $product->id }})"
                                class="relative group cursor-pointer"
                            >
                                <img 
                                    src="{{ $this->getFirstImageUrl($product) }}"
                                    alt="{{ $product->title }}"
                                    class="w-full h-64 object-cover group-hover:scale-105 transition-transform duration-300"
                                    onerror="this.src='{{ asset('images/placeholder.png') }}'"
                                />
                                <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-opacity duration-300"></div>
                            </div>
                            
                            <!-- Heart Button -->
                            <button class="absolute top-3 right-3 w-8 h-8 bg-white/90 hover:bg-white rounded-full flex items-center justify-center transition-colors">
                                <svg class="w-4 h-4 text-red-500" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"/>
                                </svg>
                            </button>
                        </div>

                        <!-- Product Info -->
                        <div class="p-4">
                            <!-- Title -->
                            <div class="mb-3">
                                <h3 
                                    wire:click="showProductDetail({{ $product->id }})"
                                    class="text-lg font-semibold text-gray-900 line-clamp-2 cursor-pointer hover:text-blue-600 transition-colors"
                                >
                                    {{ $product->title }}
                                </h3>
                                <div class="flex items-center gap-2 mt-1">
                                    <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full">
                                        {{ $product->product->name }}
                                    </span>
                                </div>
                            </div>

                            <!-- Meta Info -->
                            <div class="space-y-3 mb-4">
                                <!-- Producer -->
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center">
                                        <span class="text-white text-xs font-bold">
                                            {{ substr($product->person->first_name, 0, 1) }}{{ substr($product->person->last_name, 0, 1) }}
                                        </span>
                                    </div>
                                    <div>
                                        <span class="text-xs text-gray-500">Producido por</span>
                                        <h6 class="text-sm font-medium text-gray-900">
                                            {{ $product->person->first_name }} {{ $product->person->last_name }}
                                        </h6>
                                    </div>
                                </div>

                                <!-- Price -->
                                <div class="flex items-center justify-between">
                                    <div>
                                        <span class="text-xs text-gray-500">Precio</span>
                                        <div class="flex items-center gap-2">
                                            <h5 class="text-lg font-bold text-green-600">{{ $product->formatted_price }}</h5>
                                            @if($product->current_rate)
                                                @if($product->currency_type === 'USD')
                                                    <span class="text-sm text-gray-500">≈ {{ $product->formatted_bs_price }}</span>
                                                @else
                                                    <span class="text-sm text-gray-500">≈ {{ $product->formatted_usd_price }}</span>
                                                @endif
                                            @endif
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Action Buttons -->
                            <div class="flex gap-2">
                                <a 
                                    href="{{ route('productores.show', ['producer' => $product->person_id]) }}"
                                    class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg text-center transition-colors"
                                >
                                    Ver Productor
                                </a>
                                <button 
                                    wire:click="showProductDetail({{ $product->id }})"
                                    class="px-4 py-2 border border-gray-300 hover:border-gray-400 text-gray-700 hover:text-gray-900 rounded-lg transition-colors"
                                >
                                    Ver Detalles
                                </button>
                            </div>
                        </div>
                    </div>
                @empty
                    <div class="col-span-full text-center py-12">
                        <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2M4 13h2m13-8l-8 5-8-5" />
                        </svg>
                        <h3 class="mt-2 text-sm font-medium text-gray-900">No hay productos disponibles</h3>
                        <p class="mt-1 text-sm text-gray-500">
                            No se encontraron productos que coincidan con tus criterios de búsqueda.
                        </p>
                    </div>
                @endforelse
            </div>

            <!-- Load More Button -->
            @if($products->hasPages())
                <div class="text-center mt-8">
                    <button class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-8 rounded-lg transition-colors">
                        Cargar Más Productos
                    </button>
                </div>
            @endif
        </div>
    </div>

    <!-- Product Detail Modal -->
    <livewire:components.product-detail-modal />

    <!-- Mobile Tasas BCV -->
    <div class="fixed bottom-0 left-0 right-0 z-20 lg:hidden">
        <div class="bg-white shadow-lg border-t border-gray-100">
            <div class="max-w-7xl mx-auto px-4 py-2">
                <div class="flex items-center justify-between">
                    <div class="text-sm font-medium text-gray-800">Tasas BCV:</div>
                    <div class="flex items-center gap-6">
                        @if($exchangeRates['usd']['rate'])
                            <div class="flex items-center gap-2">
                                <span class="font-medium">USD:</span>
                                <span class="text-green-600">{{ $exchangeRates['usd']['rate'] }}</span>
                            </div>
                        @endif
                        @if($exchangeRates['eur']['rate'])
                            <div class="flex items-center gap-2">
                                <span class="font-medium">EUR:</span>
                                <span class="text-green-600">{{ $exchangeRates['eur']['rate'] }}</span>
                            </div>
                        @endif
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>